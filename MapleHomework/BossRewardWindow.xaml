<ui:FluentWindow x:Class="MapleHomework.BossRewardWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        Title="보스 수익 계산기" 
        Height="850" Width="950"
        WindowStartupLocation="CenterScreen"
        ExtendsContentIntoTitleBar="True"
        WindowBackdropType="Mica"
        ResizeMode="NoResize">
    
    <Grid x:Name="MainGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- 타이틀 바 (전체 캐릭터 현황과 동일한 스타일) -->
        <Border x:Name="TitleBarBorder" Grid.Row="0" Padding="24,16" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Grid>
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <ui:SymbolIcon Symbol="Money24" FontSize="26" Foreground="#FFD700" Margin="0,0,12,0"/>
                    <TextBlock Text="보스 수익 계산기" Foreground="White" FontSize="22" FontWeight="Bold" VerticalAlignment="Center"/>
                </StackPanel>
                
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <TextBlock x:Name="TxtTotalCharacters" Text="총 0개 캐릭터" 
                               Foreground="#AABBCC" FontSize="14" Margin="0,0,20,0"
                               VerticalAlignment="Center"/>
                    
                    <Button Click="MinimizeButton_Click" Width="40" Height="40" Padding="0"
                            Background="Transparent" BorderThickness="0" Cursor="Hand" ToolTip="최소화"
                            HorizontalContentAlignment="Center" VerticalContentAlignment="Center">
                        <ui:SymbolIcon Symbol="Subtract24" FontSize="20" Foreground="#B0BEC5" Margin="0"/>
                    </Button>
                    <Button Click="CloseButton_Click" Width="40" Height="40" Padding="0"
                            Background="Transparent" BorderThickness="0" Cursor="Hand" ToolTip="닫기"
                            HorizontalContentAlignment="Center" VerticalContentAlignment="Center">
                        <ui:SymbolIcon Symbol="Dismiss24" FontSize="20" Foreground="#B0BEC5" Margin="0"/>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
        
        <Grid Grid.Row="1" Margin="16,8,16,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="320"/>
            </Grid.ColumnDefinitions>
            
            <!-- 왼쪽: 보스 수익 목록 -->
            <Border x:Name="LeftPanelBorder" Grid.Column="0" CornerRadius="12" Margin="0,0,12,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- 헤더 -->
                    <Border Grid.Row="0" Background="#FF3B30" CornerRadius="12,12,0,0" Padding="20,16">
                        <Grid>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="★" Foreground="#FFD700" FontSize="18" Margin="0,0,10,0" VerticalAlignment="Center"/>
                                <TextBlock Text="주간 보스 수익" Foreground="White" FontSize="18" FontWeight="Bold" VerticalAlignment="Center"/>
                            </StackPanel>
                            <Border Background="#33FFFFFF" CornerRadius="4" Padding="10,5" HorizontalAlignment="Right" VerticalAlignment="Center">
                                <TextBlock x:Name="TxtCompletedBossCount" Text="0/12" Foreground="White" FontWeight="Bold" FontSize="13"/>
                            </Border>
                        </Grid>
                    </Border>
                    
                    <!-- 보스 목록 -->
                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Hidden">
                        <ItemsControl x:Name="BossRewardList" Margin="12">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="{Binding Background}" CornerRadius="8" Padding="14,12" Margin="0,0,0,8"
                                            BorderBrush="{Binding BorderColor}" BorderThickness="1">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <!-- 체크 표시 -->
                                            <Border Grid.Column="0" Width="24" Height="24" CornerRadius="12" 
                                                    Background="{Binding CheckBackground}" Margin="0,0,12,0"
                                                    VerticalAlignment="Center">
                                                <TextBlock Text="✓" Foreground="White" FontSize="14" FontWeight="Bold"
                                                           HorizontalAlignment="Center" VerticalAlignment="Center"
                                                           Visibility="{Binding CheckVisibility}"/>
                                            </Border>
                                            
                                            <!-- 보스 이름 + 난이도 -->
                                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                <StackPanel Orientation="Horizontal">
                                                    <Border Background="{Binding DifficultyBackground}" CornerRadius="4" Padding="8,3" Margin="0,0,10,0">
                                                        <TextBlock Text="{Binding DifficultyText}" Foreground="White" FontSize="10" FontWeight="Bold"/>
                                                    </Border>
                                                    <TextBlock Text="{Binding DisplayName}" Foreground="{Binding TextForeground}" FontSize="14" FontWeight="Medium" VerticalAlignment="Center"/>
                                                </StackPanel>
                                                <TextBlock Text="{Binding PartyInfoText}" Foreground="#8899AA" FontSize="11" Margin="0,4,0,0"/>
                                            </StackPanel>
                                            
                                            <!-- 개인 수익 -->
                                            <StackPanel Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Right">
                                                <TextBlock Text="{Binding PersonalRewardText}" Foreground="{Binding RewardForeground}" 
                                                           FontSize="16" FontWeight="Bold" HorizontalAlignment="Right"/>
                                                <TextBlock Text="{Binding TotalRewardText}" Foreground="#8899AA" 
                                                           FontSize="11" HorizontalAlignment="Right" Margin="0,2,0,0"
                                                           Visibility="{Binding ShowTotalReward}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </Grid>
            </Border>
            
            <!-- 오른쪽: 요약 정보 -->
            <StackPanel Grid.Column="1">
                <!-- 캐릭터 선택 -->
                <Border x:Name="CharacterSelectBorder" CornerRadius="12" Padding="20" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock x:Name="CharacterSelectLabel" Text="캐릭터 선택" FontSize="14" Margin="0,0,0,10"/>
                        <ComboBox x:Name="CmbCharacter" SelectionChanged="CmbCharacter_SelectionChanged">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Nickname}" FontWeight="Medium"/>
                                        <TextBlock Text=" - Lv." Foreground="#8899AA"/>
                                        <TextBlock Text="{Binding Level}" Foreground="#8899AA"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>
                    </StackPanel>
                </Border>
                
                <!-- 주간 수익 요약 -->
                <Border x:Name="WeeklyRewardBorder" CornerRadius="12" Padding="20" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock Text="주간 수익" FontSize="14" Foreground="#B0BEC5" Margin="0,0,0,12"/>
                        
                        <Border Background="#33FF3B30" CornerRadius="8" Padding="16,12" Margin="0,0,0,10">
                            <Grid>
                                <TextBlock Text="획득한 수익" Foreground="#FF6B6B" FontSize="13" VerticalAlignment="Center"/>
                                <TextBlock x:Name="TxtWeeklyBossReward" Text="0 메소" Foreground="#FF6B6B" FontSize="15" FontWeight="Bold" 
                                           HorizontalAlignment="Right" VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                        
                        <Border Background="#334CD964" CornerRadius="8" Padding="16,12">
                            <Grid>
                                <TextBlock Text="예상 수익" Foreground="#5FE086" FontSize="13" VerticalAlignment="Center"/>
                                <TextBlock x:Name="TxtWeeklyBossRewardShort" Text="0억" Foreground="#5FE086" FontSize="15" FontWeight="Bold" 
                                           HorizontalAlignment="Right" VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </Border>
                
                <!-- 월간 수익 요약 -->
                <Border x:Name="MonthlyRewardBorder" CornerRadius="12" Padding="20" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock Text="월간 수익" FontSize="14" Foreground="#B0BEC5" Margin="0,0,0,12"/>
                        
                        <Border Background="#33AF52DE" CornerRadius="8" Padding="16,12" Margin="0,0,0,10">
                            <Grid>
                                <TextBlock Text="획득한 수익" Foreground="#C77DFF" FontSize="13" VerticalAlignment="Center"/>
                                <TextBlock x:Name="TxtMonthlyBossReward" Text="0" Foreground="#C77DFF" FontSize="15" FontWeight="Bold" 
                                           HorizontalAlignment="Right" VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                        
                        <Border Background="#335AC8FA" CornerRadius="8" Padding="16,12">
                            <Grid>
                                <TextBlock Text="예상 수익" Foreground="#7DD3FC" FontSize="13" VerticalAlignment="Center"/>
                                <TextBlock x:Name="TxtMonthlyBossExpected" Text="0" Foreground="#7DD3FC" FontSize="15" FontWeight="Bold" 
                                           HorizontalAlignment="Right" VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </Border>
                
                <!-- 전체 캐릭터 총 수익 -->
                <Border CornerRadius="12" Padding="20">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#5AC8FA" Offset="0"/>
                            <GradientStop Color="#34AADC" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <StackPanel>
                        <TextBlock Text="전체 캐릭터 주간 획득 수익" Foreground="White" FontSize="13" Opacity="0.9" Margin="0,0,0,6"/>
                        <TextBlock x:Name="TxtTotalWeeklyReward" Text="0억 메소" Foreground="White" FontSize="22" FontWeight="Bold"/>
                        <Border Height="1" Background="#33FFFFFF" Margin="0,14"/>
                        <TextBlock Text="전체 캐릭터 주간 예상 수익" Foreground="White" FontSize="13" Opacity="0.9" Margin="0,0,0,6"/>
                        <TextBlock x:Name="TxtTotalWeeklyExpected" Text="0억 메소" Foreground="White" FontSize="22" FontWeight="Bold"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Grid>
    </Grid>
</ui:FluentWindow>
