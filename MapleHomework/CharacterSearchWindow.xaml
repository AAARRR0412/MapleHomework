<ui:FluentWindow x:Class="MapleHomework.CharacterSearchWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        xmlns:converters="clr-namespace:MapleHomework.Converters"
        Title="캐릭터 검색"
        Width="1200" Height="950"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        ExtendsContentIntoTitleBar="True"
        WindowBackdropType="Mica"
        UseLayoutRounding="True"
        Background="{DynamicResource WindowBackground}">

    <ui:FluentWindow.Resources>
        <converters:RateToWidthConverter x:Key="RateToWidthConverter"/>
        
        <!-- Dark Mode Color Palette (ThemeService에서 전역 관리) -->

        <!-- 메이플 시안 그라데이션 -->
        <LinearGradientBrush x:Key="MapleCyanGradient" StartPoint="0,0" EndPoint="1,0">
            <GradientStop Color="#0EA5E9" Offset="0"/> <!-- Sky-500 -->
            <GradientStop Color="#14B8A6" Offset="1"/> <!-- Teal-500 -->
        </LinearGradientBrush>
        
        <!-- 장비 슬롯 스타일 (Dark) -->
        <Style x:Key="EquipSlotStyle" TargetType="Grid">
            <Setter Property="Width" Value="42"/>
            <Setter Property="Height" Value="42"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Margin" Value="2"/>
            <EventSetter Event="MouseMove" Handler="EquipSlot_MouseMove"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Effect">
                        <Setter.Value>
                            <DropShadowEffect Color="#0EA5E9" BlurRadius="10" ShadowDepth="0" Opacity="0.7"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <!-- 카드 스타일 (Dark) -->
        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Background" Value="{DynamicResource SurfaceContainer}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource Outline}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="8" ShadowDepth="2" Opacity="0.2" Color="Black"/>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- 섹션 헤더 스타일 (Dark) -->
        <Style x:Key="SectionHeader" TargetType="Border">
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="14,8"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
            <Setter Property="Background" Value="#313135"/>
        </Style>
    </ui:FluentWindow.Resources>

    <Grid Background="{DynamicResource WindowBackground}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- ═══════════════════════════════════════════════════════════════════ -->
        <!-- 커스텀 타이틀바 (ReportWindow 스타일) -->
        <!-- ═══════════════════════════════════════════════════════════════════ -->
        <Border Grid.Row="0" Padding="24,16" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="#5AC8FA" Offset="0"/>
                    <GradientStop Color="#4ECDC4" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <Grid>
                <!-- 좌측: 아이콘 + 제목 (항상 표시) -->
                <StackPanel x:Name="TitlePanel" Orientation="Horizontal" VerticalAlignment="Center">
                    <Border Background="{DynamicResource SurfaceContainer}" CornerRadius="10" Width="40" Height="40" Margin="0,0,14,0">
                         <ui:SymbolIcon Symbol="Search24" FontSize="22" Foreground="{DynamicResource TextPrimary}"/>
                    </Border>
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock Text="캐릭터 검색" Foreground="White" 
                                   FontSize="20" FontWeight="SemiBold"/>
                        <TextBlock x:Name="SubtitleText" Text="장비와 스탯을 조회합니다" Foreground="#D0FFFFFF" 
                                   FontSize="12" Margin="0,2,0,0"/>
                    </StackPanel>
                </StackPanel>
                
                <!-- 중앙: 검색창 (검색 후에만 표시) -->
                <Border x:Name="HeaderSearchBox" Visibility="Collapsed" HorizontalAlignment="Center" 
                        Width="420" Height="44" CornerRadius="22" 
                        Background="{DynamicResource SurfaceContainer}" BorderBrush="{DynamicResource Outline}" BorderThickness="1">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="8" ShadowDepth="0" Opacity="0.1" Color="#000000"/>
                    </Border.Effect>
                    <Grid>
                        <ui:SymbolIcon Symbol="Search24" FontSize="18" Foreground="{DynamicResource OnSurfaceVariant}" 
                                       HorizontalAlignment="Left" VerticalAlignment="Center" Margin="16,0,0,0"/>
                        <TextBox x:Name="HeaderSearchTextBox" FontSize="14" Padding="44,10,80,10"
                                 Background="Transparent" Foreground="{DynamicResource OnSurface}" 
                                 BorderThickness="0" VerticalContentAlignment="Center"
                                 KeyDown="HeaderSearchTextBox_KeyDown">
                            <TextBox.Style>
                                <Style TargetType="TextBox">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="TextBox">
                                                <Grid>
                                                    <TextBlock x:Name="Placeholder" Text="다른 캐릭터 검색..." 
                                                               Foreground="{DynamicResource OnSurfaceVariant}" VerticalAlignment="Center"
                                                               Margin="44,0,0,0" Visibility="Collapsed" FontSize="14"/>
                                                    <ScrollViewer x:Name="PART_ContentHost" VerticalAlignment="Center"/>
                                                </Grid>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="Text" Value="">
                                                        <Setter TargetName="Placeholder" Property="Visibility" Value="Visible"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </TextBox.Style>
                        </TextBox>
                        <Button x:Name="HeaderSearchButton" Click="HeaderSearchButton_Click" 
                                HorizontalAlignment="Right" Margin="0,0,4,0" Cursor="Hand"
                                Width="36" Height="36">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border x:Name="Bd" CornerRadius="18" Background="{StaticResource MapleCyanGradient}">
                                                    <ui:SymbolIcon Symbol="ArrowRight24" FontSize="16" Foreground="White"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="Bd" Property="Opacity" Value="0.85"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>
                    </Grid>
                </Border>
                
                <!-- Cache Info & Refresh -->
                <StackPanel x:Name="CacheInfoPanel" Orientation="Horizontal" Visibility="Collapsed" 
                            HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,100,0">
                    <TextBlock x:Name="LastUpdatedText" Text="업데이트: -" Foreground="#D0FFFFFF" FontSize="12" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <Button x:Name="RefreshButton" Click="RefreshButton_Click" Background="Transparent" BorderThickness="0"
                            Width="32" Height="32" Padding="4" ToolTip="새로고침">
                        <ui:SymbolIcon Symbol="ArrowCounterclockwise24" FontSize="16" Foreground="White"/>
                    </Button>
                </StackPanel>

                <!-- 우측: 창 제어 버튼 -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <Button Width="40" Height="40" Click="MinimizeButton_Click"
                            Background="Transparent" BorderThickness="0" Cursor="Hand" ToolTip="최소화">
                        <ui:SymbolIcon Symbol="Subtract24" FontSize="18" Foreground="{DynamicResource OnSurfaceVariant}"/>
                    </Button>
                    <Button Width="40" Height="40" Click="CloseButton_Click"
                            Background="Transparent" BorderThickness="0" Cursor="Hand" ToolTip="닫기">
                        <ui:SymbolIcon Symbol="Dismiss24" FontSize="18" Foreground="{DynamicResource OnSurfaceVariant}"/>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- ═══════════════════════════════════════════════════════════════════ -->
        <!-- 메인 컨텐츠 영역 -->
        <!-- ═══════════════════════════════════════════════════════════════════ -->
        <Grid Grid.Row="1" Margin="24,24,24,24">
            
            <!-- ═══════════════════════════════════════════════════════════════════ -->
            <!-- 초기 검색 화면 (중앙 정렬) - maple.gg 스타일 -->
            <!-- ═══════════════════════════════════════════════════════════════════ -->
            <Grid x:Name="InitialSearchPanel" Visibility="Visible">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,0,80">
                    <!-- 로고/타이틀 -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,32">
                        <Border Width="56" Height="56" CornerRadius="14" Margin="0,0,16,0">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#5AC8FA" Offset="0"/>
                                    <GradientStop Color="#4ECDC4" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <ui:SymbolIcon Symbol="Person24" FontSize="28" Foreground="White"/>
                        </Border>
                        <TextBlock Text="캐릭터 검색" FontSize="36" FontWeight="Bold" 
                                   Foreground="{DynamicResource OnSurface}" VerticalAlignment="Center"/>
                    </StackPanel>
                    
                    <!-- 검색창 (큰 사이즈) -->
                    <Border Width="540" Height="56" CornerRadius="28" Margin="0,0,0,16"
                            Background="{DynamicResource SurfaceContainer}"
                            BorderBrush="{DynamicResource Outline}" BorderThickness="1">
                        <Border.Effect>
                            <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.1" Color="#000000"/>
                        </Border.Effect>
                        <Grid>
                            <ui:SymbolIcon Symbol="Search24" FontSize="22" Foreground="{DynamicResource OnSurfaceVariant}" 
                                           HorizontalAlignment="Left" VerticalAlignment="Center" Margin="20,0,0,0"/>
                            <TextBox x:Name="SearchTextBox" FontSize="17" Padding="56,14,100,14"
                                     Background="Transparent" Foreground="{DynamicResource OnSurface}" 
                                     BorderThickness="0" VerticalContentAlignment="Center"
                                     KeyDown="SearchTextBox_KeyDown">
                                <TextBox.Style>
                                    <Style TargetType="TextBox">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="TextBox">
                                                    <Grid>
                                                        <TextBlock x:Name="Placeholder" Text="캐릭터 닉네임을 입력하세요" 
                                                                   Foreground="{DynamicResource OnSurfaceVariant}" VerticalAlignment="Center"
                                                                   Margin="56,0,0,0" Visibility="Collapsed" FontSize="17"/>
                                                        <ScrollViewer x:Name="PART_ContentHost" VerticalAlignment="Center"/>
                                                    </Grid>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="Text" Value="">
                                                            <Setter TargetName="Placeholder" Property="Visibility" Value="Visible"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </TextBox.Style>
                            </TextBox>
                            <Button x:Name="SearchButton" Click="SearchButton_Click" 
                                    HorizontalAlignment="Right" Margin="0,0,8,0" Cursor="Hand"
                                    Width="80" Height="42">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border x:Name="Bd" CornerRadius="21" Background="{StaticResource MapleCyanGradient}">
                                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                            <ui:SymbolIcon Symbol="Search24" FontSize="16" Foreground="White" Margin="0,0,6,0"/>
                                                            <TextBlock Text="검색" Foreground="White" FontSize="14" FontWeight="SemiBold"/>
                                                        </StackPanel>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="Bd" Property="Opacity" Value="0.85"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Button.Style>
                            </Button>
                        </Grid>
                    </Border>
                    
                    <!-- 설명 텍스트 -->
                    <TextBlock Text="검색하면 캐릭터의 장비, 스탯, 스킬 정보를 확인할 수 있습니다" 
                               Foreground="{DynamicResource OnSurfaceVariant}" FontSize="14"
                               HorizontalAlignment="Center"/>
                </StackPanel>
            </Grid>
            
            <!-- ═══════════════════════════════════════════════════════════════════ -->
            <!-- 결과 영역 (그리드 레이아웃) -->
            <!-- ═══════════════════════════════════════════════════════════════════ -->

            <!-- 로딩 토스트 (아이폰 스타일) -->
            <Border x:Name="LoadingPanel" Grid.RowSpan="2" Visibility="Collapsed" 
                    HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,0,0,40">
                <Border Padding="20,14" CornerRadius="26" MinWidth="280">
                    <Border.Background>
                        <SolidColorBrush Color="#222222" Opacity="0.9"/>
                    </Border.Background>
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="20" ShadowDepth="4" Opacity="0.3" Color="#000000"/>
                    </Border.Effect>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <ui:ProgressRing IsIndeterminate="True" Width="20" Height="20" Foreground="#5AC8FA" Margin="0,0,12,0"/>
                        <TextBlock x:Name="LoadingText" Text="캐릭터 정보를 불러오는 중..." 
                                   Foreground="White" FontSize="14" FontWeight="SemiBold" VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>
            </Border>

            <!-- ═══════════════════════════════════════════════════════════════════ -->
            <!-- 2. 결과 영역 -->
            <!-- ═══════════════════════════════════════════════════════════════════ -->
            <Grid x:Name="ResultPanel" Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="300"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- ═══════════════════════════════════════════════════════════════════ -->
                <!-- 좌측: 캐릭터, EXP, 장비 -->
                <!-- ═══════════════════════════════════════════════════════════════════ -->
                <Grid Grid.Column="0" Margin="0,0,16,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="2*"/>
                        <RowDefinition Height="1*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- 1. CHARACTER CARD (Simplified & Smaller) -->
                    <Border x:Name="CharacterCard" Grid.Row="0" CornerRadius="12" Margin="0,0,0,12" VerticalAlignment="Stretch"
                            Background="{DynamicResource SurfaceContainer}" BorderBrush="{DynamicResource Outline}" BorderThickness="1">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Header -->
                            <Border Grid.Row="0" CornerRadius="12,12,0,0" Padding="16,8">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#3D4A5C" Offset="0"/>
                                        <GradientStop Color="#4A5568" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <TextBlock Text="CHARACTER" Foreground="White" FontSize="12" FontWeight="Bold"/>
                            </Border>
                            
                            <!-- Content -->
                            <Border Grid.Row="1" Padding="12" CornerRadius="0,0,12,12" VerticalAlignment="Stretch">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                        <GradientStop Color="#27272A" Offset="0"/>
                                        <GradientStop Color="#3F3F46" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Grid VerticalAlignment="Center">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <!-- Image (Increased Size 120 -> 150) -->
                                    <Border Grid.Row="0" Width="150" Height="150" CornerRadius="12" ClipToBounds="True" HorizontalAlignment="Center">
                                        <Image x:Name="CharacterImage" Stretch="Uniform" RenderOptions.BitmapScalingMode="Fant" RenderTransformOrigin="0.5,0.5">
                                            <Image.RenderTransform>
                                                <ScaleTransform ScaleX="2.0" ScaleY="2.0"/>
                                            </Image.RenderTransform>
                                        </Image>
                                    </Border>
                                    
                                    <!-- Name/Level -->
                                    <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,8,0,0">
                                        <Border Padding="10,4" CornerRadius="6" Background="#3F3F46">
                                            <TextBlock x:Name="CharacterName" Text="-" Foreground="White" FontSize="13" FontWeight="Bold"/>
                                        </Border>
                                        <Border Padding="8,4" CornerRadius="6" Margin="6,0,0,0">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                    <GradientStop Color="#5AC8FA" Offset="0"/>
                                                    <GradientStop Color="#4ECDC4" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="Lv." Foreground="White" FontSize="11" FontWeight="Bold"/>
                                                <TextBlock x:Name="CharacterLevel" Text="-" Foreground="White" FontSize="11" FontWeight="Bold"/>
                                            </StackPanel>
                                        </Border>
                                    </StackPanel>
                                    
                                    <!-- Class/World -->
                                    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,6,0,0">
                                        <Border Padding="8,3" CornerRadius="10" Background="#A78BFA">
                                            <TextBlock x:Name="CharacterClass" Text="-" Foreground="White" FontSize="10" FontWeight="SemiBold"/>
                                        </Border>
                                        <TextBlock x:Name="WorldText" Text="-" Foreground="#64748B" FontSize="10" VerticalAlignment="Center" Margin="6,0,0,0"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </Grid>
                    </Border>
                    
                    <!-- 2. EXP TREND CARD (Compact & Stretch) -->
                    <Border x:Name="ExpCard" Grid.Row="1" CornerRadius="12" Margin="0,0,0,12" VerticalAlignment="Stretch"
                            Background="{DynamicResource SurfaceContainer}" BorderBrush="{DynamicResource Outline}" BorderThickness="1">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/> <!-- Fill remaining space -->
                            </Grid.RowDefinitions>
                            
                            <!-- Header (Blue-Grey) -->
                            <Border Grid.Row="0" CornerRadius="12,12,0,0" Padding="16,8">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#3D4A5C" Offset="0"/>
                                        <GradientStop Color="#4A5568" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Grid>
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                        <TextBlock Text="EXP TREND" Foreground="White" FontSize="12" FontWeight="Bold"/>
                                    </StackPanel>
                                    
                                    <!-- Avg (Right) -->
                                    <!-- Avg (Right) -->
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                                        <TextBlock Text="일일 평균 경험치 획득량 :" Foreground="#C0FFFFFF" FontSize="10" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                        <TextBlock x:Name="AvgExpText" Text="-" Foreground="White" FontSize="12" FontWeight="Bold" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- Content -->
                            <Border Grid.Row="1" Padding="10" Background="{DynamicResource SurfaceContainer}" CornerRadius="0,0,12,12" VerticalAlignment="Stretch">
                                <Grid VerticalAlignment="Center">
                                    <!-- Graph Content (Height Auto to fill) -->
                                    <StackPanel x:Name="ExpContentPanel" Visibility="Collapsed" VerticalAlignment="Center">
                                        <Grid Height="80" VerticalAlignment="Center"> <!-- Increased height slightly for better fill -->
                                            <ItemsControl x:Name="ExpGraphList">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <UniformGrid Rows="1" HorizontalAlignment="Stretch" VerticalAlignment="Bottom"/>
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Margin="1,0" VerticalAlignment="Bottom">
                                                            <TextBlock Text="{Binding ExpRateText}" Foreground="#10b981" FontSize="9" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,0,0,2"/>
                                                            <Border Width="20" CornerRadius="3,3,0,0" HorizontalAlignment="Center"
                                                                    Height="{Binding GraphRate, Converter={StaticResource RateToWidthConverter}, ConverterParameter=45}">
                                                                <Border.Background>
                                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                                        <GradientStop Color="#34d399" Offset="0"/>
                                                                        <GradientStop Color="#10b981" Offset="1"/>
                                                                    </LinearGradientBrush>
                                                                </Border.Background>
                                                            </Border>
                                                            <TextBlock Text="{Binding DateLabel}" Foreground="{DynamicResource OnSurfaceVariant}" FontSize="8" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </Grid>
                                    </StackPanel>
                                    
                                    <!-- Loading -->
                                    <StackPanel x:Name="ExpLoadingPanel" Visibility="Visible" Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,10">
                                        <ui:ProgressRing IsIndeterminate="True" Width="16" Height="16" Foreground="#10b981" Margin="0,0,0,6"/>
                                        <TextBlock x:Name="ExpLoadingText1" Text="분석 중..." Foreground="#10b981" FontSize="10" FontWeight="SemiBold"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </Grid>
                    </Border>
                    
                    <!-- 3. EQUIPMENT CARD (New) -->
                    <Border x:Name="EquipmentCard" Grid.Row="2" CornerRadius="12" Background="{DynamicResource SurfaceContainer}" BorderBrush="{DynamicResource Outline}" BorderThickness="1">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Header -->
                            <Border Grid.Row="0" CornerRadius="12,12,0,0" Padding="16,10">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#3D4A5C" Offset="0"/>
                                        <GradientStop Color="#4A5568" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <TextBlock Text="EQUIPMENT" Foreground="White" FontSize="13" FontWeight="Bold"/>
                            </Border>
                            
                            <!-- Content (Grid) -->
                            <Border Grid.Row="1" Margin="8" CornerRadius="10" Padding="12,12,12,16" Background="{DynamicResource WindowBackground}" BorderBrush="{DynamicResource Outline}" BorderThickness="1">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="8" ShadowDepth="0" Opacity="0.08" Color="#000000"/>
                                </Border.Effect>
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <!-- 5x6 장비 그리드 -->
                                    <Grid Grid.Row="0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="46"/>
                                            <RowDefinition Height="46"/>
                                            <RowDefinition Height="46"/>
                                            <RowDefinition Height="46"/>
                                            <RowDefinition Height="46"/>
                                            <RowDefinition Height="46"/>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="46"/>
                                            <ColumnDefinition Width="46"/>
                                            <ColumnDefinition Width="46"/>
                                            <ColumnDefinition Width="46"/>
                                            <ColumnDefinition Width="46"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <!-- Row 0 -->
                                        <Grid x:Name="Slot_Ring3" Grid.Row="0" Grid.Column="0" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Face" Grid.Row="0" Grid.Column="1" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Hat" Grid.Row="0" Grid.Column="3" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Cape" Grid.Row="0" Grid.Column="4" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        
                                        <!-- Row 1 -->
                                        <Grid x:Name="Slot_Ring2" Grid.Row="1" Grid.Column="0" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Eye" Grid.Row="1" Grid.Column="1" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Weapon" Grid.Row="1" Grid.Column="2" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Top" Grid.Row="1" Grid.Column="3" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Glove" Grid.Row="1" Grid.Column="4" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        
                                        <!-- Row 2 -->
                                        <Grid x:Name="Slot_Ring1" Grid.Row="2" Grid.Column="0" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Earring" Grid.Row="2" Grid.Column="1" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_SubWeapon" Grid.Row="2" Grid.Column="2" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Bottom" Grid.Row="2" Grid.Column="3" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Shoes" Grid.Row="2" Grid.Column="4" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        
                                        <!-- Row 3 -->
                                        <Grid x:Name="Slot_Ring0" Grid.Row="3" Grid.Column="0" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Pendant1" Grid.Row="3" Grid.Column="1" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Emblem" Grid.Row="3" Grid.Column="2" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Shoulder" Grid.Row="3" Grid.Column="3" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Medal" Grid.Row="3" Grid.Column="4" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        
                                        <!-- Row 4 -->
                                        <Grid x:Name="Slot_Belt" Grid.Row="4" Grid.Column="0" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Pendant0" Grid.Row="4" Grid.Column="1" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Android" Grid.Row="4" Grid.Column="3" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Heart" Grid.Row="4" Grid.Column="4" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        
                                        <!-- Row 5 -->
                                        <Grid x:Name="Slot_Pocket" Grid.Row="5" Grid.Column="0" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                        <Grid x:Name="Slot_Badge" Grid.Row="5" Grid.Column="4" Style="{StaticResource EquipSlotStyle}" MouseEnter="EquipSlot_MouseEnter" MouseLeave="EquipSlot_MouseLeave">
                                            <Image Source="/Data/EquipTab.Slots.png" Stretch="None"/>
                                        </Grid>
                                    </Grid>
                                    
                                    <!-- 프리셋 버튼 -->
                                    <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,12,0,0">
                                        <TextBlock x:Name="PresetsLabel" Text="PRESET" Foreground="#64748B" FontSize="12" 
                                                   FontWeight="SemiBold" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <Border x:Name="Preset1Border" Width="40" Height="32" CornerRadius="6" Cursor="Hand"
                                                MouseLeftButtonDown="Preset1_Click" Margin="0,0,6,0"
                                                Background="{StaticResource MapleCyanGradient}">
                                            <TextBlock Text="1" Foreground="White" FontSize="14" FontWeight="Bold"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <Border x:Name="Preset2Border" Width="40" Height="32" CornerRadius="6" Cursor="Hand"
                                                MouseLeftButtonDown="Preset2_Click" Margin="0,0,6,0"
                                                Background="#64748B">
                                            <TextBlock Text="2" Foreground="White" FontSize="14" FontWeight="Bold"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <Border x:Name="Preset3Border" Width="40" Height="32" CornerRadius="6" Cursor="Hand"
                                                MouseLeftButtonDown="Preset3_Click"
                                                Background="#64748B">
                                            <TextBlock Text="3" Foreground="White" FontSize="14" FontWeight="Bold"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </Grid>
                    </Border>
                </Grid>


                <!-- ═══════════════════════════════════════════════════════════════════ -->
                <!-- 우측: 프로필 + EXP + HEXA -->
                <!-- ═══════════════════════════════════════════════════════════════════ -->
                <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                    <StackPanel>
                        <!-- ═══════════════════════════════════════════════════════════════════ -->
                        <!-- ═══════════════════════════════════════════════════════════════════ -->
                        <!-- STATS & SYMBOL INFO (Split Layout) -->
                        <!-- ═══════════════════════════════════════════════════════════════════ -->
                        <Grid Margin="0,0,0,16">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="16"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- STAT INFO (Left) -->
                            <Border x:Name="StatInfoCard" Grid.Column="0" CornerRadius="12"
                                    Background="{DynamicResource SurfaceContainer}" BorderBrush="{DynamicResource Outline}" BorderThickness="1" VerticalAlignment="Top">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    
                                    <!-- Header -->
                                    <Border Grid.Row="0" CornerRadius="12,12,0,0" Padding="0">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                <GradientStop Color="#0EA5E9" Offset="0"/>
                                                <GradientStop Color="#6366F1" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                        <Grid Margin="20,16">
                                            <StackPanel Orientation="Horizontal">
                                                <Border Background="#20FFFFFF" CornerRadius="8" Padding="8" Margin="0,0,14,0">
                                                    <ui:SymbolIcon Symbol="Person24" FontSize="20" Foreground="White" />
                                                </Border>
                                                <StackPanel VerticalAlignment="Center">
                                                    <TextBlock Text="CHARACTER INFO" Foreground="White" FontSize="17" FontWeight="Bold"/>
                                                    <TextBlock Text="기본 스탯 및 무릉/유니온" Foreground="#C0FFFFFF" FontSize="11" Margin="0,2,0,0"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                    
                                    <!-- Content -->
                                    <Border Grid.Row="1" Padding="12,16">
                                        <StackPanel>
                                            <!-- 전투력 표시 -->
                                            <Border Margin="0,0,0,16" Padding="12,10" CornerRadius="8" HorizontalAlignment="Stretch">
                                                <Border.Background>
                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                        <GradientStop Color="#20FF9500" Offset="0"/>
                                                        <GradientStop Color="#15FECA57" Offset="1"/>
                                                    </LinearGradientBrush>
                                                </Border.Background>
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock x:Name="LabelCombatPower" Grid.Column="0" Text="전투력" Foreground="#B8996A" FontSize="12" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                                    <TextBlock x:Name="CombatPowerText" Grid.Column="1" Text="-" HorizontalAlignment="Right" FontSize="16" FontWeight="Bold" VerticalAlignment="Center">
                                                        <TextBlock.Foreground>
                                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                                <GradientStop Color="#FF9500" Offset="0"/>
                                                                <GradientStop Color="#FECA57" Offset="1"/>
                                                            </LinearGradientBrush>
                                                        </TextBlock.Foreground>
                                                    </TextBlock>
                                                </Grid>
                                            </Border>
                                            
                                            <!-- 상세 스탯 그리드 -->
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <!-- 유니온 -->
                                                <Border Grid.Row="0" Grid.Column="0" Margin="0,0,4,8" Padding="10" CornerRadius="8" Background="{DynamicResource CardBackgroundAlt}">
                                                    <StackPanel>
                                                        <TextBlock x:Name="LabelUnion" Text="유니온" Foreground="#64748B" FontSize="11" Margin="0,0,0,4"/>
                                                        <TextBlock x:Name="UnionLevelText" Text="-" Foreground="#5AC8FA" FontSize="14" FontWeight="Bold"/>
                                                    </StackPanel>
                                                </Border>
                                                
                                                <!-- 무릉도장 -->
                                                <Border Grid.Row="0" Grid.Column="1" Margin="4,0,0,8" Padding="10" CornerRadius="8" Background="{DynamicResource CardBackgroundAlt}">
                                                    <StackPanel>
                                                        <TextBlock Text="무릉도장" Foreground="#64748B" FontSize="11" Margin="0,0,0,4"/>
                                                        <TextBlock x:Name="MuLungText" Text="-" Foreground="#A78BFA" FontSize="14" FontWeight="Bold"/>
                                                    </StackPanel>
                                                </Border>
                                                
                                                <!-- 인기도 -->
                                                <Border Grid.Row="1" Grid.Column="0" Margin="0,0,4,8" Padding="10" CornerRadius="8" Background="{DynamicResource CardBackgroundAlt}">
                                                    <StackPanel>
                                                        <TextBlock Text="인기도" Foreground="#64748B" FontSize="11" Margin="0,0,0,4"/>
                                                        <TextBlock x:Name="PopularityText" Text="-" Foreground="#F472B6" FontSize="14" FontWeight="Bold"/>
                                                    </StackPanel>
                                                </Border>
                                                
                                                <!-- 길드 -->
                                                <Border Grid.Row="1" Grid.Column="1" Margin="4,0,0,8" Padding="10" CornerRadius="8" Background="{DynamicResource CardBackgroundAlt}">
                                                    <StackPanel>
                                                        <TextBlock x:Name="LabelGuild" Text="길드" Foreground="#64748B" FontSize="11" Margin="0,0,0,4"/>
                                                        <TextBlock x:Name="GuildText" Text="-" Foreground="#4ECDC4" FontSize="14" FontWeight="Bold"/>
                                                    </StackPanel>
                                                </Border>
                                            </Grid>
                                        </StackPanel>
                                    </Border>
                                </Grid>
                            </Border>

                            <!-- SYMBOL INFO (Right) -->
                            <Border x:Name="SymbolInfoCard" Grid.Column="2" CornerRadius="12" Padding="0"
                                    Background="{DynamicResource SurfaceContainer}" BorderBrush="{DynamicResource Outline}" BorderThickness="1">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.08" Color="#000000"/>
                                </Border.Effect>
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    
                                    <!-- Header Background -->
                                    <Border Grid.Row="0" Grid.RowSpan="2" CornerRadius="12,12,0,0" VerticalAlignment="Stretch">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                <GradientStop Color="#6366f1" Offset="0"/>
                                                <GradientStop Color="#8b5cf6" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                    </Border>

                                    <!-- Header Content -->
                                    <Grid Grid.Row="0" Margin="20,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                            <Border Background="#20FFFFFF" CornerRadius="8" Padding="8" Margin="0,0,14,0">
                                                <ui:SymbolIcon Symbol="Glance24" FontSize="20" Foreground="White" />
                                            </Border>
                                            <StackPanel VerticalAlignment="Center">
                                                <TextBlock Text="SYMBOL INFO" Foreground="White" FontSize="17" FontWeight="Bold"/>
                                                <TextBlock Text="아케인 / 어센틱 / 그랜드" Foreground="#C0FFFFFF" FontSize="11" Margin="0,2,0,0"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <!-- Tabs (Right Aligned) -->
                                        <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                                            <StackPanel.Resources>
                                                <Style TargetType="RadioButton">
                                                    <Setter Property="Background" Value="Transparent"/>
                                                    <Setter Property="Foreground" Value="#C0FFFFFF"/>
                                                    <Setter Property="Padding" Value="12,6"/>
                                                    <Setter Property="Margin" Value="4,0"/>
                                                    <Setter Property="FontSize" Value="13"/>
                                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                                    <Setter Property="Cursor" Value="Hand"/>
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="RadioButton">
                                                                <Border Background="{TemplateBinding Background}" CornerRadius="6" Padding="{TemplateBinding Padding}">
                                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                </Border>
                                                                <ControlTemplate.Triggers>
                                                                    <Trigger Property="IsChecked" Value="True">
                                                                        <Setter Property="Background" Value="White"/>
                                                                        <Setter Property="Foreground" Value="#7c3aed"/> <!-- Violet-600 -->
                                                                    </Trigger>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter Property="Foreground" Value="White"/>
                                                                    </Trigger>
                                                                    <MultiTrigger>
                                                                        <MultiTrigger.Conditions>
                                                                            <Condition Property="IsMouseOver" Value="True"/>
                                                                            <Condition Property="IsChecked" Value="True"/>
                                                                        </MultiTrigger.Conditions>
                                                                        <Setter Property="Foreground" Value="#7c3aed"/>
                                                                    </MultiTrigger>
                                                                </ControlTemplate.Triggers>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </StackPanel.Resources>
                                            
                                            <RadioButton x:Name="TabArcane" Content="아케인" IsChecked="True" Click="OnSymbolTabClicked"/>
                                            <RadioButton x:Name="TabAuthentic" Content="어센틱" Click="OnSymbolTabClicked"/>
                                            <RadioButton x:Name="TabGrand" Content="그랜드" Click="OnSymbolTabClicked"/>
                                        </StackPanel>
                                    </Grid>

                                    <!-- Symbol List (Fixed Height logic handled by MinHeight on ItemsControl or Grid) -->
                                    <Grid Grid.Row="2" Margin="10" MinHeight="480" VerticalAlignment="Top"> <!-- Fixed height area -->
                                    <ItemsControl x:Name="SymbolList">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Vertical"/>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Margin="0,0,0,8" Padding="12" CornerRadius="8" Background="{DynamicResource CardBackgroundAlt}" BorderBrush="{DynamicResource BorderColor}" BorderThickness="1">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/> <!-- Icon -->
                                                            <ColumnDefinition Width="*"/>    <!-- Info -->
                                                            <ColumnDefinition Width="Auto"/> <!-- Level/Cost -->
                                                        </Grid.ColumnDefinitions>

                                                        <Image Source="{Binding SymbolIconUrl}" Width="36" Height="36" Margin="0,0,12,0" VerticalAlignment="Top"/>

                                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                            <TextBlock Text="{Binding SymbolName}" FontWeight="Bold" Foreground="{DynamicResource TextPrimary}" FontSize="13"/>
                                                            
                                                            <!-- Gauge -->
                                                            <ProgressBar Value="{Binding GrowthRate, Mode=OneWay}" Maximum="1" Height="6" Margin="0,6,12,2" 
                                                                         Foreground="#6366f1" Background="{DynamicResource SurfaceContainer}" BorderThickness="0"/>
                                                            <TextBlock Text="{Binding GrowthText}" FontSize="10" Foreground="#888888"/>
                                                        </StackPanel>

                                                        <StackPanel Grid.Column="2" HorizontalAlignment="Right" VerticalAlignment="Center">
                                                            <TextBlock Text="{Binding DisplayLevel}" FontWeight="Bold" FontSize="14" HorizontalAlignment="Right" Foreground="{DynamicResource TextPrimary}"/>
                                                            <StackPanel Orientation="Vertical" HorizontalAlignment="Right" Margin="0,2,0,0">
                                                                <TextBlock Text="{Binding RemainingCountText}" FontSize="10" Foreground="#6B7280" HorizontalAlignment="Right"/>
                                                                <TextBlock Text="{Binding RemainingCostText}" FontSize="10" Foreground="#EF4444" FontWeight="SemiBold" HorizontalAlignment="Right"/>
                                                            </StackPanel>
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                    
                                    <!-- No Data Text -->
                                    <TextBlock x:Name="NoSymbolText" Text="장착된 심볼이 없습니다." Grid.Row="2" 
                                               HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,30,0,0" 
                                               Foreground="#9CA3AF" Visibility="Collapsed"/>
                                    </Grid> <!-- End Inner Grid -->
                                </Grid> <!-- End Main Grid -->
                            </Border>
                        </Grid>

                        <!-- ═══════════════════════════════════════════════════════════════════ -->
                        <!-- ═══════════════════════════════════════════════════════════════════ -->
                        <!-- UNION CHAMPION Section -->
                        <Border x:Name="UnionChampionCard" CornerRadius="12" Padding="20" Margin="0,0,0,16"
                                Background="{DynamicResource SurfaceContainer}" BorderBrush="{DynamicResource Outline}" BorderThickness="1" Visibility="Collapsed">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.08" Color="#000000"/>
                            </Border.Effect>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                
                                <!-- Header -->
                                <Border Grid.Row="0" CornerRadius="12,12,0,0" Margin="-21,-21,-21,20">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                            <GradientStop Color="#A78BFA" Offset="0"/>
                                            <GradientStop Color="#C084FC" Offset="0.5"/>
                                            <GradientStop Color="#E879F9" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Grid Margin="20,16">
                                        <StackPanel Orientation="Horizontal">
                                            <Border Background="#20FFFFFF" CornerRadius="8" Padding="8" Margin="0,0,14,0">
                                                <ui:SymbolIcon Symbol="PeopleTeam20" FontSize="20" Foreground="White"/>
                                            </Border>
                                            <StackPanel VerticalAlignment="Center">
                                                <TextBlock Text="UNION CHAMPION" Foreground="White" FontSize="17" FontWeight="Bold"/>
                                                <TextBlock Text="유니온 챔피언 및 배지 정보" Foreground="#C0FFFFFF" FontSize="11" Margin="0,2,0,0"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- Content -->
                                <Grid Grid.Row="1">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- Champion List (Left) -->
                                    <Border Grid.Column="0" CornerRadius="8" Margin="0,0,8,0"
                                            Background="{DynamicResource CardBackgroundAlt}" BorderBrush="{DynamicResource BorderColor}" BorderThickness="1">
                                        <Grid Margin="16">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>
                                            <TextBlock Text="챔피언 목록" FontWeight="Bold" FontSize="14" Foreground="{DynamicResource TextPrimary}" Margin="0,0,0,12"/>
                                            
                                            <ItemsControl x:Name="UnionChampionList" Grid.Row="1">
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Grid Margin="0,0,0,8">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="Auto"/> <!-- Slot -->
                                                                <ColumnDefinition Width="*"/>    <!-- Name/Class -->
                                                                <ColumnDefinition Width="Auto"/> <!-- Grade -->
                                                            </Grid.ColumnDefinitions>
                                                            
                                                            <Border Width="24" Height="24" CornerRadius="6" Background="#30A78BFA" Margin="0,0,10,0" VerticalAlignment="Center">
                                                                <TextBlock Text="{Binding ChampionSlot}" Foreground="#A78BFA" FontWeight="Bold" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            </Border>
                                                            
                                                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                                <TextBlock Text="{Binding ChampionName}" Foreground="{DynamicResource TextPrimary}" FontWeight="Bold" FontSize="13"/>
                                                                <TextBlock Text="{Binding ChampionClass}" Foreground="{DynamicResource TextSecondary}" FontSize="11"/>
                                                            </StackPanel>
                                                            
                                                            <Border Grid.Column="2" Padding="8,2" CornerRadius="4" Background="#20F43F5E" VerticalAlignment="Center">
                                                                <TextBlock Text="{Binding ChampionGrade}" Foreground="#F43F5E" FontWeight="Bold" FontSize="12"/>
                                                            </Border>
                                                        </Grid>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </Grid>
                                    </Border>

                                    <!-- Total Stats (Right) -->
                                    <Border Grid.Column="1" CornerRadius="8" Margin="8,0,0,0"
                                            Background="{DynamicResource CardBackgroundAlt}" BorderBrush="{DynamicResource BorderColor}" BorderThickness="1">
                                        <Grid Margin="16">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>
                                            <TextBlock Text="챔피언 배지 합계" FontWeight="Bold" FontSize="14" Foreground="{DynamicResource TextPrimary}" Margin="0,0,0,12"/>
                                            
                                            <ItemsControl x:Name="UnionBadgeList" Grid.Row="1">
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border Margin="0,0,0,6" Padding="8,6" CornerRadius="6" Background="#10FFFFFF">
                                                            <TextBlock Text="{Binding Stat}" Foreground="{DynamicResource TextSecondary}" FontSize="12" TextWrapping="Wrap"/>
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Grid>
                        </Border>

                        <Border x:Name="HexaCoreCard" CornerRadius="12" Padding="20"
                                Background="{DynamicResource SurfaceContainer}" BorderBrush="{DynamicResource Outline}" BorderThickness="1">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.08" Color="#000000"/>
                            </Border.Effect>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- Header (Spans both columns) -->
                                <Border Grid.Row="0" Grid.ColumnSpan="2" CornerRadius="12,12,0,0" Margin="-21,-21,-21,20">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                            <GradientStop Color="#A78BFA" Offset="0"/>
                                            <GradientStop Color="#C084FC" Offset="0.5"/>
                                            <GradientStop Color="#E879F9" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Grid Margin="20,16">
                                        <StackPanel Orientation="Horizontal">
                                            <Border Background="#20FFFFFF" CornerRadius="8" Padding="8" Margin="0,0,14,0">
                                                <Image Source="/Data/hexa.png" Width="20" Height="20"/>
                                            </Border>
                                            <StackPanel VerticalAlignment="Center">
                                                <TextBlock Text="HEXA CORE" Foreground="White" FontSize="17" FontWeight="Bold"/>
                                                <TextBlock Text="6차 스킬 코어 정보" Foreground="#C0FFFFFF" FontSize="11" Margin="0,2,0,0"/>
                                            </StackPanel>
                                        </StackPanel>
                                        
                                        <!-- 확대/축소 토글 버튼 -->
                                        <ToggleButton HorizontalAlignment="Right" VerticalAlignment="Center"
                                                      IsChecked="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=IsHexaExpanded, Mode=TwoWay}"
                                                      Cursor="Hand" Background="Transparent" BorderThickness="0" Padding="8">
                                            <ToggleButton.Style>
                                                <Style TargetType="ToggleButton">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="ToggleButton">
                                                                <Border Background="{TemplateBinding Background}" CornerRadius="8" Padding="{TemplateBinding Padding}">
                                                                    <StackPanel Orientation="Horizontal">
                                                                        <TextBlock x:Name="ToggleText" Text="확대" Foreground="#E0E0E0" FontSize="12" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                                                        <ui:SymbolIcon x:Name="ToggleIcon" Symbol="ArrowMaximize16" FontSize="16" Foreground="White" />
                                                                    </StackPanel>
                                                                </Border>
                                                                <ControlTemplate.Triggers>
                                                                    <Trigger Property="IsChecked" Value="True">
                                                                        <Setter TargetName="ToggleText" Property="Text" Value="축소"/>
                                                                        <Setter TargetName="ToggleIcon" Property="Symbol" Value="ArrowMinimize16"/>
                                                                    </Trigger>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter Property="Background" Value="#20FFFFFF"/>
                                                                    </Trigger>
                                                                </ControlTemplate.Triggers>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </ToggleButton.Style>
                                        </ToggleButton>
                                    </Grid>
                                </Border>

                                <!-- HEXA CORE -->
                                <StackPanel Grid.Row="1" Grid.Column="0">
                                    

                                    
                                    <ItemsControl x:Name="HexaCoreList">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <UniformGrid Columns="2" VerticalAlignment="Top"/>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Grid Margin="6">
                                                    <Grid.Style>
                                                        <Style TargetType="Grid">
                                                            <Setter Property="MinHeight" Value="54"/> <!-- 기본 축소 높이 (10% 감소) -->
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=IsHexaExpanded}" Value="True">
                                                                    <Setter Property="MinHeight" Value="100"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Grid.Style>
                                                    <Border CornerRadius="12" Background="{DynamicResource CardBackgroundAlt}" 
                                                            BorderBrush="{DynamicResource BorderColor}" BorderThickness="1"
                                                            Tag="{Binding}"
                                                            MouseEnter="HexaCore_MouseEnter"
                                                            MouseLeave="HexaCore_MouseLeave"
                                                            MouseMove="HexaCore_MouseMove">
                                                        <Grid>
                                                            <!-- 게이지 배경 (GradientBrush) -->
                                                            <Border HorizontalAlignment="Stretch" VerticalAlignment="Stretch" CornerRadius="12">
                                                                <Border.Background>
                                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                                        <GradientStop Color="#40A78BFA" Offset="{Binding ProgressFactor}"/>
                                                                        <GradientStop Color="Transparent" Offset="{Binding ProgressFactor}"/>
                                                                    </LinearGradientBrush>
                                                                </Border.Background>
                                                            </Border>
                                                            
                                                            <Grid Margin="8">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                </Grid.ColumnDefinitions>
                                                                
                                                                <!-- 아이콘 (배지 제거됨) -->
                                                                <Grid Grid.Column="0" Width="44" Height="44" Margin="0,0,12,0" VerticalAlignment="Center">
                                                                    <Border CornerRadius="8" Background="Transparent">
                                                                        <Image Source="{Binding SkillIcon}" Stretch="Uniform" Margin="4"/>
                                                                    </Border>
                                                                    <!-- 레벨 (좌측 하단) -->
                                                                    <Border Background="#CC000000" CornerRadius="4" VerticalAlignment="Bottom" HorizontalAlignment="Left" Padding="4,1" Margin="-4,0,0,-4">
                                                                        <TextBlock Text="{Binding CoreLevel, StringFormat='Lv.{0}'}" Foreground="White" FontSize="10" FontWeight="Bold"/>
                                                                    </Border>
                                                                </Grid>
                                                                
                                                                <!-- 텍스트 정보 -->
                                                                <Grid Grid.Column="1" VerticalAlignment="Center">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition Height="Auto"/>
                                                                        <RowDefinition Height="Auto"/>
                                                                        <RowDefinition Height="Auto"/>
                                                                    </Grid.RowDefinitions>
                                                                    
                                                                    <!-- 스킬명 & 진행도 -->
                                                                    <Grid Grid.Row="0" Margin="0,0,0,6">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="*"/>
                                                                            <ColumnDefinition Width="Auto"/>
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock Text="{Binding SkillName}" FontWeight="Bold" FontSize="14" Foreground="{DynamicResource TextPrimary}"/>
                                                                        <TextBlock Grid.Column="1" Text="{Binding ProgressText}" Foreground="#A78BFA" FontWeight="Bold" FontSize="14"/>
                                                                    </Grid>
                                                                    

                                                                    
                                                                    <!-- 상세 정보 패널 (애니메이션 적용) -->
                                                                    <StackPanel x:Name="DetailsPanel" Grid.Row="1" Grid.RowSpan="2" ClipToBounds="True">
                                                                        <StackPanel.Style>
                                                                            <Style TargetType="StackPanel">
                                                                                <Setter Property="MaxHeight" Value="0"/>
                                                                                <Setter Property="Opacity" Value="0"/>
                                                                                <Style.Triggers>
                                                                                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=IsHexaExpanded}" Value="True">
                                                                                        <DataTrigger.EnterActions>
                                                                                            <BeginStoryboard>
                                                                                                <Storyboard>
                                                                                                    <DoubleAnimation Storyboard.TargetProperty="MaxHeight" To="300" Duration="0:0:0.3" DecelerationRatio="0.5"/>
                                                                                                    <DoubleAnimation Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.2"/>
                                                                                                </Storyboard>
                                                                                            </BeginStoryboard>
                                                                                        </DataTrigger.EnterActions>
                                                                                        <DataTrigger.ExitActions>
                                                                                            <BeginStoryboard>
                                                                                                <Storyboard>
                                                                                                    <DoubleAnimation Storyboard.TargetProperty="MaxHeight" To="0" Duration="0:0:0.3" AccelerationRatio="0.5"/>
                                                                                                    <DoubleAnimation Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.2"/>
                                                                                                </Storyboard>
                                                                                            </BeginStoryboard>
                                                                                        </DataTrigger.ExitActions>
                                                                                    </DataTrigger>
                                                                                </Style.Triggers>
                                                                            </Style>
                                                                        </StackPanel.Style>
                                                                    
                                                                        <!-- 다음 레벨 비용 -->
                                                                        <Grid Grid.Row="1" Margin="0,0,0,2">
                                                                            <Grid.ColumnDefinitions>
                                                                                <ColumnDefinition Width="65"/> <!-- 60 -> 65로 증가 -->
                                                                                <ColumnDefinition Width="Auto"/>
                                                                                <ColumnDefinition Width="Auto"/>
                                                                            </Grid.ColumnDefinitions>
                                                                            <TextBlock Text="다음 레벨" Foreground="{DynamicResource TextSecondary}" FontSize="11"/>
                                                                            <StackPanel Grid.Column="1" Orientation="Horizontal" Width="55"> <!-- 60 -> 55로 감소 -->
                                                                                <Image Source="/Data/sol-erda.png" Width="14" Height="14" Margin="0,0,4,0"/>
                                                                                <TextBlock Text="{Binding NextSolErdaText}" FontSize="11" Foreground="{DynamicResource TextPrimary}"/>
                                                                            </StackPanel>
                                                                            <StackPanel Grid.Column="2" Orientation="Horizontal">
                                                                                <Image Source="/Data/sol-erda-fragment.png" Width="14" Height="14" Margin="0,0,4,0"/>
                                                                                <TextBlock Text="{Binding NextFragmentText}" FontSize="11" Foreground="{DynamicResource TextPrimary}"/>
                                                                            </StackPanel>
                                                                        </Grid>
                                                                    
                                                                        <!-- 졸업까지 비용 -->
                                                                        <Grid Grid.Row="2">
                                                                            <Grid.ColumnDefinitions>
                                                                                <ColumnDefinition Width="65"/> <!-- 60 -> 65로 증가 -->
                                                                                <ColumnDefinition Width="Auto"/>
                                                                                <ColumnDefinition Width="Auto"/>
                                                                            </Grid.ColumnDefinitions>
                                                                            <TextBlock Text="졸업까지" Foreground="{DynamicResource TextSecondary}" FontSize="11"/>
                                                                            <StackPanel Grid.Column="1" Orientation="Horizontal" Width="55"> <!-- 60 -> 55로 감소 -->
                                                                                <Image Source="/Data/sol-erda.png" Width="14" Height="14" Margin="0,0,4,0"/>
                                                                                <TextBlock Text="{Binding RemainingSolErdaText}" FontSize="11" Foreground="{DynamicResource TextPrimary}"/>
                                                                            </StackPanel>
                                                                            <StackPanel Grid.Column="2" Orientation="Horizontal">
                                                                                <Image Source="/Data/sol-erda-fragment.png" Width="14" Height="14" Margin="0,0,4,0"/>
                                                                                <TextBlock Text="{Binding RemainingFragmentText}" FontSize="11" Foreground="{DynamicResource TextPrimary}"/>
                                                                            </StackPanel>
                                                                        </Grid>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Grid>
                                                    </Border>
                                                </Grid>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                    
                                    <TextBlock x:Name="NoHexaText" Text="HEXA 코어 정보 없음" 
                                               Foreground="{DynamicResource OnSurfaceVariant}" FontSize="15" Margin="0,16,0,0" Visibility="Collapsed"/>
                                </StackPanel>
                                
                                <!-- HEXA STAT -->
                                    <ItemsControl x:Name="HexaStatList" Grid.Row="1" Grid.Column="1" Visibility="Collapsed" Margin="20,0,0,0">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Vertical"/>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border CornerRadius="12" Margin="0,0,0,8" BorderThickness="1" BorderBrush="{DynamicResource BorderColor}"
                                                        Background="{DynamicResource CardBackgroundAlt}">
                                                    
                                                    <Grid Margin="10">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/> <!-- Slot Index -->
                                                            <ColumnDefinition Width="*"/>    <!-- Stats -->
                                                            <ColumnDefinition Width="Auto"/> <!-- Level Label -->
                                                        </Grid.ColumnDefinitions>

                                                        <!-- 슬롯 번호 -->
                                                        <Border Grid.Column="0" Width="32" Height="32" CornerRadius="8" Margin="0,0,16,0" VerticalAlignment="Center">
                                                            <Border.Background>
                                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                                    <GradientStop Color="#A78BFA" Offset="0"/>
                                                                    <GradientStop Color="#7C3AED" Offset="1"/>
                                                                </LinearGradientBrush>
                                                            </Border.Background>
                                                            <TextBlock Text="{Binding SlotIndex}" Foreground="White" FontWeight="Bold" FontSize="16" 
                                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Border>

                                                        <!-- 스탯 정보 -->
                                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                            <TextBlock Text="{Binding MainStat}" Foreground="#A78BFA" FontWeight="Bold" FontSize="15" Margin="0,0,0,4"/>
                                                            
                                                            <!-- 상세 스탯 (애니메이션 적용) -->
                                                            <StackPanel x:Name="StatDetails" ClipToBounds="True">
                                                                <StackPanel.Style>
                                                                    <Style TargetType="StackPanel">
                                                                        <Setter Property="MaxHeight" Value="0"/>
                                                                        <Setter Property="Opacity" Value="0"/>
                                                                        <Style.Triggers>
                                                                            <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=IsHexaExpanded}" Value="True">
                                                                                <DataTrigger.EnterActions>
                                                                                    <BeginStoryboard>
                                                                                        <Storyboard>
                                                                                            <DoubleAnimation Storyboard.TargetProperty="MaxHeight" To="50" Duration="0:0:0.3" DecelerationRatio="0.5"/>
                                                                                            <DoubleAnimation Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.2"/>
                                                                                        </Storyboard>
                                                                                    </BeginStoryboard>
                                                                                </DataTrigger.EnterActions>
                                                                                <DataTrigger.ExitActions>
                                                                                    <BeginStoryboard>
                                                                                        <Storyboard>
                                                                                            <DoubleAnimation Storyboard.TargetProperty="MaxHeight" To="0" Duration="0:0:0.3" AccelerationRatio="0.5"/>
                                                                                            <DoubleAnimation Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.2"/>
                                                                                        </Storyboard>
                                                                                    </BeginStoryboard>
                                                                                </DataTrigger.ExitActions>
                                                                            </DataTrigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </StackPanel.Style>
                                                                
                                                                <!-- Sub Stat 1 -->
                                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,2">
                                                                    <TextBlock Text="{Binding SubStat1}" Foreground="{DynamicResource TextSecondary}" FontSize="12" Margin="0,0,4,0"/>
                                                                    <TextBlock Text="Lv." Foreground="{DynamicResource TextSecondary}" FontSize="11" VerticalAlignment="Bottom" Margin="0,0,1,1"/>
                                                                    <TextBlock Text="{Binding SubLevel1}" Foreground="{DynamicResource TextPrimary}" FontWeight="SemiBold" FontSize="12"/>
                                                                </StackPanel>

                                                                <!-- Sub Stat 2 -->
                                                                <StackPanel Orientation="Horizontal">
                                                                    <TextBlock Text="{Binding SubStat2}" Foreground="{DynamicResource TextSecondary}" FontSize="12" Margin="0,0,4,0"/>
                                                                    <TextBlock Text="Lv." Foreground="{DynamicResource TextSecondary}" FontSize="11" VerticalAlignment="Bottom" Margin="0,0,1,1"/>
                                                                    <TextBlock Text="{Binding SubLevel2}" Foreground="{DynamicResource TextPrimary}" FontWeight="SemiBold" FontSize="12"/>
                                                                </StackPanel>
                                                            </StackPanel>
                                                        </StackPanel>

                                                        <!-- 레벨 정보 (우측 정렬) - 메인 레벨만 표시 -->
                                                        <StackPanel Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="16,0,0,0">
                                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,0,4">
                                                                <TextBlock Text="Lv." Foreground="{DynamicResource TextSecondary}" FontSize="13" VerticalAlignment="Bottom" Margin="0,0,3,3"/>
                                                                <TextBlock Text="{Binding MainLevel}" FontWeight="Bold" FontSize="20" Foreground="{DynamicResource TextPrimary}"/>
                                                            </StackPanel>
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                            </Grid>
                        </Border>
                        
                    </StackPanel>
                </ScrollViewer>
            </Grid>

            <!-- 토스트 알림 (아이폰 스타일) - 하단 -->
            <Border x:Name="ErrorPanel" Grid.Row="0" Grid.RowSpan="2" Visibility="Collapsed" 
                    HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,0,0,40">
                <Border Padding="20,14" CornerRadius="26" MinWidth="280" MaxWidth="400">
                    <Border.Background>
                        <SolidColorBrush Color="#222222" Opacity="0.9"/>
                    </Border.Background>
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="20" ShadowDepth="4" Opacity="0.3" Color="#000000"/>
                    </Border.Effect>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <ui:SymbolIcon x:Name="ToastIcon" Symbol="ErrorCircle24" FontSize="20" Foreground="#FF6B6B" Margin="0,0,12,0"/>
                        <TextBlock x:Name="ErrorText" Text="" Foreground="White" FontSize="14" FontWeight="SemiBold" 
                                   VerticalAlignment="Center" TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>
            </Border>
        </Grid>

        <!-- 툴팁 (Popup으로 창 밖으로도 표시 가능) -->
        <Popup x:Name="TooltipPopup" Placement="Mouse" AllowsTransparency="True" 
               IsHitTestVisible="False" PopupAnimation="None">
            <Border x:Name="TooltipBorder" Background="Transparent" BorderThickness="0">
                <Image x:Name="TooltipImage" Stretch="None" RenderOptions.BitmapScalingMode="NearestNeighbor">
                    <Image.Effect>
                        <DropShadowEffect BlurRadius="20" ShadowDepth="4" Opacity="0.6"/>
                    </Image.Effect>
                </Image>
            </Border>
        </Popup>
    </Grid>
</ui:FluentWindow>
